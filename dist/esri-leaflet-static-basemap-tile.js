/* esri-leaflet-static-basemap-tile - v1.0.0-beta.1 - Fri Oct 04 2024 14:08:59 GMT-0700 (Pacific Daylight Time)
 * Copyright (c) 2024 Environmental Systems Research Institute, Inc.
 * Apache-2.0 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("leaflet"),require("esri-leaflet")):"function"==typeof define&&define.amd?define(["exports","leaflet","esri-leaflet"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).L=t.L||{},t.L.esri=t.L.esri||{},t.L.esri.Static={}),t.L,t.L.esri)}(this,(function(t,e,i){"use strict";var s="1.0.0-beta.1";const o="https://static-map-tiles-api.arcgis.com/arcgis/rest/services/static-basemap-tiles-service/";var n={getSelf:async function(t){if(!t)throw new Error("An access token is required to access the static basemap tiles service.");const e=o+"beta/self";return new Promise(((s,o)=>{i.request(e,{token:t},((t,e)=>{t&&o(t),s(e)}))}))}},r=e.TileLayer.extend({initialize:function(t,i){if(i&&e.setOptions(this,i),this.options.apiKey&&(this.options.apikey=this.options.apiKey),this.options.apikey?this.options.token=this.options.apikey:this.options.token&&(this.options.apikey=this.options.token),!this.options.token)throw new Error("An ArcGIS access token is required for static basemap tiles. To learn more, go to https://developers.arcgis.com/documentation/security-and-authentication/");if(!t)throw new Error("A valid style enum is required for staticBasemapTileLayer (e.g. 'beta/arcgis/streets').");if(!t.includes("beta"))throw new Error("The basemap styles service is currently in beta. All style enums must begin with 'beta' (e.g. 'beta/arcgis/outdoor').");i.pane?this.options.pane=i.pane:t.includes("/labels")&&(this.options.pane="esri-labels"),this.options.zoomOffset=-1,this.options.tileSize=512,this.options.style=t,this.serviceUrl=function(t,e,i){if(!e)throw new Error("An access token is required to access the static basemap tiles service.");let s=o+t+"/static/tile/{z}/{y}/{x}?token="+e;return i.language&&(s+="&language="+i.language),s}(t,this.options.token,this.options),e.TileLayer.prototype.initialize.call(this,this.serviceUrl,this.options)},onAdd:function(t){this._setupAttribution(),this._initPane(),e.TileLayer.prototype.onAdd.call(this,t)},onRemove:function(t){this._removeAttribution(),e.TileLayer.prototype.onRemove.call(this,t)},_setupAttribution:function(){this._map&&(i.Util.setEsriAttribution(this._map),async function(t,e){const s=o+t+"/static";return new Promise(((t,o)=>{i.request(s,{token:e},((e,i)=>{e&&o(e),t(i.copyrightText)}))}))}(this.options.style,this.options.token).then((t=>{this._map.attributionControl.addAttribution(t)})))},_removeAttribution:function(){i.Util.removeEsriAttribution&&i.Util.removeEsriAttribution(this._map)},_initPane:function(){if(this._map.getPane(this.options.pane))return;const t=this._map.createPane(this.options.pane);t.style.pointerEvents="none";let e=200;"esri-labels"===this.options.pane&&(e=300),t.style.zIndex=e}});const a=s;t.StaticBasemapTileLayer=r,t.Util=n,t.VERSION=a,t.staticBasemapTileLayer=function(t,e){return new r(t,e)},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=esri-leaflet-static-basemap-tile.js.map
